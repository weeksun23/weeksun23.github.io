<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>用户管理</title>
<link href="../../css/bootstrap/bootstrap.css" rel="stylesheet">
<link href="../../css/base.css" rel="stylesheet">
<link href="../../module/lib/datetimepicker/bootstrap-datetimepicker.min.css" rel="stylesheet">
<!--[if lt IE 9]>
<script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<script src='../../module/fkie.js'></script>
<![endif]-->
<style>
	.input-group.date{
		float: left;padding-left: 15px;padding-right: 15px;
	}
</style>
</head>
<body>
<div class="container-fluid" ms-controller='page'>
	<div class="row">
		<div class="col-md-12">
			<form class="form-horizontal mgt10">
				<fieldset>
					<div class="form-group">
						<label for='userId' class="col-sm-2 control-label">用户ID</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" id='userId'>
						</div>
						<label for='email' class="col-sm-2 control-label">邮箱</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" id='email'>
						</div>
					</div>
					<div class="form-group">
						<div class='col-sm-6 pad0'>
							<label for='phoneNumber' class="col-sm-4 control-label">手机号码</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id='phoneNumber'>
							</div>
						</div>
						<div class='col-sm-6 pad0'>
							<label for='onlineState' class="col-sm-4 control-label">在线状态</label>
							<div class="col-sm-8">
								<select class="form-control col-sm-6" id='onlineState'>
									<option>不限</option>
									<option>在线</option>
									<option>离线</option>
								</select>
							</div>
						</div>
					</div>
					<div class="form-group">
						<div class='col-sm-6 pad0'>
							<label class="col-sm-4 control-label">起始日期</label>
			                <div id='sDatePicker' class="input-group date col-sm-8">
			                    <input class="form-control" type="text" value="" readonly>
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
								<span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
			                </div>
						</div>
						<div class='col-sm-6 pad0' ms-class='has-error:eDate && sDate && (eDate < sDate)'>
							<label class="col-sm-4 control-label">结束日期</label>
			                <div id='eDatePicker' class="input-group date col-sm-8">
			                    <input class="form-control" type="text" value="" readonly>
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
								<span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
			                </div>
			                 <div class="text-danger col-sm-8 col-sm-offset-4" ms-visible='eDate && sDate && (eDate < sDate)'>
								结束日期不能少于开始日期
							</div>
						</div>
		            </div>
					<div class="form-group">
						<label id='accountState' class="col-sm-2 control-label">账号状态</label>
						<div class="col-sm-10">
							<select class="form-control" id='accountState'>
								<option>不限</option>
								<option>未激活</option>
								<option>已激活</option>
								<option>禁用</option>
							</select>
						</div>
					</div>
					<div class="form-group">
					    <div class="col-sm-offset-2 col-sm-10">
					    	<button type="button" class="btn btn-primary"><i class='glyphicon glyphicon-search'></i> 搜索</button>
					    </div>
					</div>
				</fieldset>
			</form>
			<div ms-widget='table,$userList,$userListOpts'>
			</div>
		</div>
	</div>
</div>
<script src='../../module/lib/jquery/jquery-1.8.3.min.js'></script>
<script src='../../module/lib/datetimepicker/bootstrap-datetimepicker.min.js'></script>
<script src='../../module/lib/datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js'></script>
<script src='../../module/avalon.js'></script>
<script>
	require(["common/table/avalon.table"],function(){
		var vmodel = avalon.define({
			$id : "page",
			sDate : null,
			eDate : null,
			$userListOpts : {
				columns : [{
					title : "ID",field : "id"
				},{
					title : "昵称",field : "name"
				},{
					title : "邮箱",field : "email"
				},{
					title : "手机号码",field : "phonenum"
				},{
					title : "性别",field : "sex"
				},{
					title : "年龄",field : "age"
				},{
					title : "账号状态",field : "accountState"
				},{
					title : "在线状态",field : "onlineState"
				},{
					title : "操作",field : "oper",formatter : function(v,r){
						return "<a href='javascript:void(0)' ms-click='$detail(item)'>详情</a> "+
						"<a href='javascript:void(0)' ms-click='$log(item)'>日志</a> "+
						"<a href='javascript:void(0)' ms-click='$del(item)'>删除</a>";
					}
				}],
				title : "用户列表",
				data : {
					total : 45,
					rows : [{
						id : 123,
						name : "jdtest"
					},{
						id : 123,
						name : "jdtest"
					},{
						id : 123,
						name : "jdtest"
					},{
						id : 123,
						name : "jdtest"
					},{
						id : 123,
						name : "jdtest"
					}]
				},
				$detail : function(item){

				},
				$log : function(item){

				},
				$del : function(item){

				}
			}
		});
		avalon.scan();
		function getOpts(){
			return {
				language:  'zh-CN',
		        format : "yyyy-mm-dd hh:ii",
		        weekStart: 1,
		        todayBtn:  1,
				autoclose: 1,
				todayHighlight: 1,
				startView: 2
			};
		}
		$('#sDatePicker').datetimepicker(getOpts()).on("changeDate",function(ev){
			vmodel.sDate = ev.date ? ev.date.getTime() : null;
		});
		$('#eDatePicker').datetimepicker(getOpts()).on("changeDate",function(ev){
			vmodel.eDate = ev.date ? ev.date.getTime() : null;
		});
	});
</script>
</body>
</html>