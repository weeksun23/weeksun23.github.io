<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="keywords" content="weeksun23,js,css,avalon,jquery" />
	<meta name="description" content="weeksun23的个人博客" />
	<title>weeksun23's home</title>
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<link rel="stylesheet" type="text/css" href="css/responsive.css">
	<!--[if lt IE 9]> 
	<link rel="stylesheet" type="text/css" href="css/index_ie.css">
	<![endif]-->
	<script src='YuriUI/src/avalon.js'></script>
</head>
<body ms-controller="weeksun">
	<div class='bar clearfix'>
		<p class='bar-logop'>
			<img src='css/image/mt.jpg' alt='weeksun23' title='weeksun23'/>
		</p>
		<div class='bar-content'>
			<h1 class='bar-title'><a href=''>weeksun23's home</a></h1>
			<ul class='bar-nav clearfix' ms-class='_show:isMenuShow' ms-on-animationend='$animationend'
				ms-click="$onClickNav()" ms-class-1='bar-nav-animate:isMenuShow' ms-class-2='bar-nav-animate-hide:isMenuAnimateHide'>
				<li class='hide bar-nav-title'><a href=''>weeksun23's home</a></li>
				<li ms-class='selected:curPage==="lab"'><a href='#lab' data-type='lab'>实验</a></li>
				<li ms-class='selected:curPage==="log"'><a href='#log' data-type='log'>日志</a></li>
				<li ms-class='selected:curPage==="about"'><a href='#about' data-type='about'>关于</a></li>
			</ul>
			<div class='bar-content-menu hide'>
				<a href='javascript:void(0)' class='bar-toggle' ms-click='$toggleMenu()' ms-class='selected:isMenuShow'>
					<i></i><i></i><i></i>
				</a>
			</div>
		</div>
	</div>
	<div class='content' ms-visible="curPage==='lab'">
		<ul class='content-list clearfix'>
			<li ms-repeat='labList' class='content-item'>
				<h6 class='content-item-title'>
					<a ms-href='{{el.href}}' target="_blank">{{el.title}}</a>
				</h6>
				<p class='content-item-info'>
					{{el.date}}
				</p>
				<div class='content-item-artical'>
					{{el.desc}}
				</div>
			</li>
		</ul>
	</div>
	<div class='content' ms-visible="curPage==='log'">
		<h2 class='nomes'>暂无日志</h2>
	</div>
	<div class='content about' ms-visible="curPage==='about'">
		<h2>
			大家好，我是weeksun23，热爱web前端
		</h2>
		<p>
			<label>qq</label><span>103484653</span>
		</p>
		<p>
			<label>e-mail</label><span>jy013018@aliyun.com</span>
		</p>
		<p>
			<label>Github</label><a href='https://github.com/weeksun23' target='_blank'>https://github.com/weeksun23</a>
		</p>
	</div>
	<div class='mask hide' title='关闭' ms-click='$onClickMask()' ms-visible='isWindowOpen'></div>
	<div class='window hide' ms-visible='isWindowOpen'>
		{{windowHtml | html}}
	</div>
	<script>
		var vmodel = avalon.define("weeksun",function(vm){
			vm.curPage = 'lab';
			vm.windowHtml = "";
			vm.windowSrc = "";
			vm.isMenuShow = false;
			vm.isWindowOpen = false;
			vm.isMenuAnimateHide = false;
			vm.labList = [{
				href : "YuriUI/demo/index.html",title : "Yuri ui",date : "2014-11-21",desc : "基于avalon的ui库"
			},{
				href : "Pick/test/base.html",title : "Pick",date : "2015-02-05",desc : "移动端滑动选择插件"
			},{
				href : "Clock/clock.html",title : "Clock",date : "2015-02-06",desc : "css3+js的计时时钟"
			}];
			vm.$onClickMask = function(){
				vmodel.isWindowOpen = false;
			};
			vm.$onTitleClick = function(src){
				vmodel.windowSrc = src;
				if(vmodel.windowHtml === ""){
					vmodel.windowHtml = 
						"<iframe ms-src='{{windowSrc}}' scrolling='no' frameborder='0' name='weeksun'></iframe>";
				}
				vmodel.isWindowOpen = true;
			};
			vm.$onClickNav = function(e){
				var target = e.target;
				var tagName = target.tagName;
				if(tagName && tagName.toLowerCase() === 'a'){
					var type = target.getAttribute("data-type");
					if(type){
						vmodel.curPage = type;
					}
				}
			};
			vm.$toggleMenu = function(){
				if(vmodel.isMenuShow){
					vmodel.isMenuAnimateHide = true;
				}else{
					vmodel.isMenuShow = true;
				}
			};
			vm.$animationend = function(){
				if(vmodel.isMenuAnimateHide){
					vmodel.isMenuShow = false;
					vmodel.isMenuAnimateHide = false;
				}
			};
		});
		function isNoNeedHide(target){
			target = avalon(target);
			return target.hasClass("bar-nav") || target.hasClass('bar-toggle');
		}
		avalon.bind(document.body,'mousedown',function(e){
			if(vmodel.isMenuShow){
				var target = e.target;
				if(target && target.tagName){
					if(isNoNeedHide(target)) return;
					var pNode = target.parentNode;
					while(pNode){
						if(isNoNeedHide(pNode)) return;
						pNode = pNode.parentNode;
					}
					vmodel.isMenuAnimateHide = true;
				}
			}
		});
	</script>
</body>
</html>